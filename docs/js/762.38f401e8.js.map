{"version":3,"file":"js/762.38f401e8.js","mappings":"gbAqGAA,EAAAA,EAAAA,IAAU,KAIR,IAHAC,EAAAA,EAAAA,MAGIC,EAAAA,GAAaC,yBAA0B,EAQzCC,EAAAA,EAAAA,IAAc,UAAWF,EAAAA,GAAaC,0BAGtC,MAAME,EAAoBC,SAASC,eAAe,qBAC5CC,EAAuBF,SAASC,eAAe,wBAC/CE,EAAkBH,SAASC,eAAe,mBAC1CG,EAAoBJ,SAASC,eAAe,qBAC5CI,EAAsBL,SAASC,eAAe,uBAOpD,GANIF,IAAmBA,EAAkBO,MAAMC,QAAU,QACrDL,IACFA,EAAqBI,MAAMC,QAAU,OACrCL,EAAqBI,MAAME,cAAgB,UAEzCL,IAAiBA,EAAgBM,YAAcb,EAAAA,GAAac,4BAC5DN,GAAqBC,EAAqB,CAC5C,MAAMM,EAAYf,EAAAA,GAAagB,4BAC/B,GAAID,EAAW,CACb,MAAME,EAAgB,2BAA2BF,IACjDP,EAAkBU,IAAMD,EACxBT,EAAkBE,MAAMC,QAAU,QAClCH,EAAkBE,MAAMS,WAAa,UACrCV,EAAoBC,MAAMC,QAAU,OACpCF,EAAoBC,MAAMS,WAAa,QACzC,KAAO,CACL,MAAMC,EAAWpB,EAAAA,GAAac,2BAA6Bd,EAAAA,GAAac,2BAA2BO,OAAO,GAAGC,cAAgB,IAC7Hb,EAAoBI,YAAcO,EAClCX,EAAoBC,MAAMC,QAAU,OACpCF,EAAoBC,MAAMS,WAAa,UACvCX,EAAkBE,MAAMC,QAAU,OAClCH,EAAkBE,MAAMS,WAAa,SACrCX,EAAkBU,IAAM,EAC1B,CACF,EAGAK,EAAAA,EAAAA,OAGAC,EAAAA,EAAAA,IAAuBxB,EAAAA,GAAaC,yBACtC,I,oBAvJAwB,EAAAA,EAAAA,IAoFM,MApFNC,EAoFM,C,aAlFJC,EAAAA,EAAAA,IAIM,OAJDC,MAAM,0BAA0BC,GAAG,qB,EACtCF,EAAAA,EAAAA,IAAgC,OAA3BC,MAAM,cAAa,OACxBD,EAAAA,EAAAA,IAAmB,UAAf,eACJA,EAAAA,EAAAA,IAA6B,SAA1B,4B,KAILA,EAAAA,EAAAA,IA0EM,MA1ENG,EA0EM,EAxEJH,EAAAA,EAAAA,IAeM,MAfNI,EAeM,C,8bAJJJ,EAAAA,EAAAA,IAGM,MAHNK,EAGM,EAFJL,EAAAA,EAAAA,IAAmG,UAA3FE,GAAG,wBAAwBI,MAAM,SAAUC,QAAKC,EAAA,KAAAA,EAAA,GAAAC,IAAEC,EAAAA,EAAAA,IAAAC,EAAAA,GAAAD,KAA8B,M,aACxFV,EAAAA,EAAAA,IAAyD,UAAjDE,GAAG,qBAAqBI,MAAM,QAAO,OAAG,Q,+3ECnB1D,MAAMM,EAAc,EAEpB,O","sources":["webpack://vue-chat/./src/views/PrivateChat.vue","webpack://vue-chat/./src/views/PrivateChat.vue?cc19"],"sourcesContent":["<template>\n  <div class=\"chat-content\" data-content=\"private-chat\">\n    <!-- ç©ºç™½çŠ¶æ€ -->\n    <div class=\"empty-chat-state active\" id=\"privateEmptyState\">\n      <div class=\"empty-icon\">ğŸ‘¤</div>\n      <h3>é€‰æ‹©ä¸€ä¸ªå¥½å‹å¼€å§‹èŠå¤©</h3>\n      <p>è¯·ä»å·¦ä¾§å¥½å‹åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå¥½å‹ï¼Œå¼€å§‹ç§èŠä¼šè¯</p>\n    </div>\n\n    <!-- å…·ä½“ç§ä¿¡èŠå¤©ç•Œé¢ -->\n    <div class=\"private-chat-interface\" id=\"privateChatInterface\" style=\"display: none;\">\n      <!-- èŠå¤©å¤´éƒ¨ -->\n      <div class=\"private-header\">\n        <div class=\"private-user-info\">\n          <div class=\"private-user-avatar\">\n            <img id=\"privateUserAvatar\" src=\"\" alt=\"ç”¨æˆ·å¤´åƒ\" class=\"user-avatar-img\" loading=\"lazy\" width=\"40\" height=\"40\" style=\"aspect-ratio: 1/1; object-fit: cover;\">\n            <span id=\"privateUserInitials\" class=\"user-initials\"></span>\n          </div>\n          <div class=\"private-user-details\">\n            <h2 id=\"privateUserName\">å¥½å‹æ˜µç§°</h2>\n            <div id=\"privateUserStatus\" class=\"user-status\">åœ¨çº¿</div>\n          </div>\n        </div>\n        <div class=\"private-actions\">\n          <button id=\"privateUserInfoButton\" title=\"æŸ¥çœ‹ç”¨æˆ·èµ„æ–™\" @click=\"initializeUserProfileModal()\">ğŸ‘¤</button>\n          <button id=\"deleteFriendButton\" title=\"åˆ é™¤å¥½å‹\">ğŸ—‘ï¸</button>\n        </div>\n      </div>\n\n      <!-- ç§ä¿¡Markdownå·¥å…·æ  -->\n      <div class=\"markdown-toolbar private-markdown-toolbar\" id=\"privateMarkdownToolbar\" style=\"display: none;\">\n        <button class=\"markdown-btn\" data-prefix=\"**\" data-suffix=\"**\" data-sample=\"ç²—ä½“æ–‡æœ¬\">ç²—ä½“</button>\n        <button class=\"markdown-btn\" data-prefix=\"_\" data-suffix=\"_\" data-sample=\"æ–œä½“æ–‡æœ¬\">æ–œä½“</button>\n        <button class=\"markdown-btn\" data-prefix=\"`\" data-suffix=\"`\" data-sample=\"ä»£ç \">ä»£ç </button>\n        <button class=\"markdown-btn\" data-prefix=\"```\\n\" data-suffix=\"\\n```\" data-sample=\"ä»£ç å—\">ä»£ç å—</button>\n        <button class=\"markdown-btn\" data-prefix=\"# \" data-sample=\"æ ‡é¢˜\">æ ‡é¢˜</button>\n        <button class=\"markdown-btn\" data-prefix=\"- \" data-sample=\"åˆ—è¡¨é¡¹\">åˆ—è¡¨</button>\n        <button class=\"markdown-btn\" data-prefix=\"> \" data-sample=\"å¼•ç”¨æ–‡æœ¬\">å¼•ç”¨</button>\n        <button class=\"markdown-btn\" data-prefix=\"[é“¾æ¥æè¿°](\" data-suffix=\")\" data-sample=\"é“¾æ¥æ–‡æœ¬\">é“¾æ¥</button>\n        <button class=\"markdown-btn\" data-prefix=\"![å›¾ç‰‡æ— æ³•æ˜¾ç¤ºæ—¶çš„æ–‡å­—](\" data-suffix=\")\" data-sample=\"å›¾ç‰‡URL\">å›¾ç‰‡</button>\n      </div>\n\n      <!-- ç§ä¿¡æ¶ˆæ¯åˆ—è¡¨ -->\n      <div id=\"privateMessageContainer\">\n        <div class=\"empty-state\">\n          <h3>æš‚æ— ç§ä¿¡</h3>\n          <p>å‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯å¼€å§‹èŠå¤©å§!</p>\n        </div>\n      </div>\n\n      <!-- ç§ä¿¡è¾“å…¥åŒºåŸŸ -->\n      <div class=\"input-area\">\n        <div class=\"input-container\" id=\"privateInputContainer\">\n          <div id=\"privateMessageInput\" class=\"editable-div\" placeholder=\"å‘é€æ¶ˆæ¯ï¼ˆCtrl+Enteræˆ–Shift+Enteræ¢è¡Œ  æ”¯æŒMarkdownè¯­æ³•ï¼‰\" contenteditable=\"true\"></div>\n        </div>\n        <div class=\"input-buttons\" id=\"privateInputButtons\">\n          <button id=\"sendPrivateMessage\">å‘é€</button>\n          <button id=\"privateMoreButton\" class=\"more-button\" title=\"æ›´å¤šåŠŸèƒ½\">\n            â‹¯ <span class=\"button-text\">æ›´å¤š</span>\n          </button>\n          <button id=\"togglePrivateMarkdownToolbar\" class=\"toggle-btn\" style=\"background: #f1f1f1; border: 1px solid #ddd; border-radius: 4px; padding: 5px 10px; font-size: 12px; cursor: pointer; color: #666; transition: all 0.2s; margin-left: 5px;\">\n            <i class=\"fas fa-chevron-down\"></i> MD\n          </button>\n        </div>\n        <!-- å°†more-functionsç§»åˆ°input-buttonså¤–é¢ -->\n        <div class=\"more-functions\" id=\"privateMoreFunctions\" style=\"display: none;\">\n          <button id=\"privateImageUploadButton\" title=\"ä¸Šä¼ å›¾ç‰‡\">\n            ğŸ“· <span class=\"button-text\">å‘é€å›¾ç‰‡</span>\n          </button>\n          <button id=\"privateFileUploadButton\" title=\"ä¸Šä¼ æ–‡ä»¶\">\n            ğŸ“¤ <span class=\"button-text\">å‘é€æ–‡ä»¶</span>\n          </button>\n          <button id=\"privateSendGroupCardButton\" title=\"å‘é€ç¾¤åç‰‡\">\n            ğŸ“± <span class=\"button-text\">å‘é€ç¾¤åç‰‡</span>\n          </button>\n        </div>\n        <input type=\"file\" id=\"privateImageInput\" style=\"display: none;\" accept=\"image/*\">\n        <input type=\"file\" id=\"privateFileInput\" style=\"display: none;\">\n      </div>\n\n      <!-- ä¸Šä¼ è¿›åº¦æ¡ -->\n      <div class=\"upload-progress\" id=\"privateUploadProgress\">\n        <div class=\"upload-progress-bar\" id=\"privateUploadProgressBar\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style src=\"@/css/index.css\"></style>\n<style src=\"@/css/code-highlight.css\"></style>\n<script setup>\nimport {onMounted} from \"vue\";\nimport {\n  initializePrivateMessageSending,\n  sessionStore,\n  setActiveChat,\n  loadPrivateChatHistory,\n  initializeUserProfileModal\n} from \"@/utils/chat\";\nimport {initializePrivateChatInterface} from \"@/utils/chat\";\n\nonMounted(() => {\n  initializePrivateMessageSending()\n\n  // æ£€æŸ¥æ˜¯å¦æœ‰ä¿æŒçš„ç§ä¿¡ä¼šè¯ä¿¡æ¯ï¼Œå¦‚æœæœ‰åˆ™åº”ç”¨\n  if (sessionStore.currentPrivateChatUserId) {\n    // console.log('æ£€æµ‹åˆ°ä¿æŒçš„ç§ä¿¡ä¼šè¯ä¿¡æ¯ï¼Œåº”ç”¨çŠ¶æ€:', {\n    //   userId: sessionStore.currentPrivateChatUserId,\n    //   username: sessionStore.currentPrivateChatUsername,\n    //   nickname: sessionStore.currentPrivateChatNickname\n    // });\n    \n    // è®¾ç½®æ´»åŠ¨èŠå¤©çŠ¶æ€\n    setActiveChat('private', sessionStore.currentPrivateChatUserId);\n    \n    // ç¡®ä¿ç§ä¿¡èŠå¤©ç•Œé¢æ˜¾ç¤º\n    const privateEmptyState = document.getElementById('privateEmptyState');\n    const privateChatInterface = document.getElementById('privateChatInterface');\n    const privateUserName = document.getElementById('privateUserName');\n    const privateUserAvatar = document.getElementById('privateUserAvatar');\n    const privateUserInitials = document.getElementById('privateUserInitials');\n    if (privateEmptyState) privateEmptyState.style.display = 'none';\n    if (privateChatInterface) {\n      privateChatInterface.style.display = 'flex';\n      privateChatInterface.style.flexDirection = 'column';\n    }\n    if (privateUserName) privateUserName.textContent = sessionStore.currentPrivateChatNickname;\n    if (privateUserAvatar && privateUserInitials) {\n      const avatarUrl = sessionStore.currentPrivateChatAvatarUrl;\n      if (avatarUrl) {\n        const fullAvatarUrl = `https://back.hs.airoe.cn${avatarUrl}`;\n        privateUserAvatar.src = fullAvatarUrl;\n        privateUserAvatar.style.display = 'block';\n        privateUserAvatar.style.visibility = 'visible';\n        privateUserInitials.style.display = 'none';\n        privateUserInitials.style.visibility = 'hidden';\n      } else {\n        const initials = sessionStore.currentPrivateChatNickname ? sessionStore.currentPrivateChatNickname.charAt(0).toUpperCase() : 'U';\n        privateUserInitials.textContent = initials;\n        privateUserInitials.style.display = 'flex';\n        privateUserInitials.style.visibility = 'visible';\n        privateUserAvatar.style.display = 'none';\n        privateUserAvatar.style.visibility = 'hidden';\n        privateUserAvatar.src = '';\n      }\n    }\n    \n    // åˆå§‹åŒ–ç§ä¿¡èŠå¤©ç•Œé¢äº‹ä»¶\n    initializePrivateChatInterface();\n\n    // åŠ è½½ç§ä¿¡èŠå¤©è®°å½•\n    loadPrivateChatHistory(sessionStore.currentPrivateChatUserId);\n  }\n})\n</script>","import script from \"./PrivateChat.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PrivateChat.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"@/css/index.css?vue&type=style&index=0&lang=css&external\"\nimport \"@/css/code-highlight.css?vue&type=style&index=1&lang=css&external\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["onMounted","initializePrivateMessageSending","sessionStore","currentPrivateChatUserId","setActiveChat","privateEmptyState","document","getElementById","privateChatInterface","privateUserName","privateUserAvatar","privateUserInitials","style","display","flexDirection","textContent","currentPrivateChatNickname","avatarUrl","currentPrivateChatAvatarUrl","fullAvatarUrl","src","visibility","initials","charAt","toUpperCase","initializePrivateChatInterface","loadPrivateChatHistory","_createElementBlock","_hoisted_1","_createElementVNode","class","id","_hoisted_2","_hoisted_3","_hoisted_4","title","onClick","_cache","$event","_unref","initializeUserProfileModal","__exports__"],"ignoreList":[],"sourceRoot":""}